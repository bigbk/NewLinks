
<!doctype html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
	
<title>VIN Research Links</title>

<style type="text/css">

	/*body {background-color:#77c2e6; font-family: Roboto,Verdana,Arial,sans-serif;}*/

</style>
	
<link rel="stylesheet" href="style.css">	

<link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Chivo:400,700,900|Signika+Negative:300,400,600,700" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" 

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	 

<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script type="text/javascript"></script>

</head>

	
<body style="background-color:#003366;">


	
	<div class="row" align="left"  style="background-color:#fff;">

		<div style="float: left; width: 80%;">
		<h1 class="font-weight-bold">
		<span style="color:#003366">VIN</span> 
		<span style="color:#003366"> RESEARCH<span style="background-color:#003366;" class="special-decoration">LINKS</span></span>
		</h1>
		</div>

	</div>
	
	<div class="row" align="right" style="width:90%;">
	<input type="text" id="b12" placeholder="VIN - 17 Digits" name="name" > <!-- maxlength="100" style="border-radius: 10px; border: 2px solid #609; padding: 20px; width: 200px; height: 15px;"> -->
	<!-- <button id="btn_submit">Submit</button> -->
	<button type="submit" id="btn_submit"><i class="fa fa-search"></i></button>
	</div>
	
	<div class="row" align="left"	 style="background-color:#fff;">
		<div class="column left">
		


		
		</div>
<!--     --------------------------------------------                      -->
		<div class="column middle" >
				     
		<div style="margin-top: 20px; margin-bottom: 20px; background-color:#77c2e6; width: 100%; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); text-align: center;">
				<output name="output" id="output">
				
				</output>
		</div>
			
		<div id="chrysler_div" style="display:none; background-color:#fff;">
			<p><span style="font-size: 16px; background-color:#fdde58; color: #036; font-family: Montserrat,'Trebuchet MS',Helvetica,sans-serif;"><strong> These links work for Chrysler, Jeep, RAM, Fiat, Alfa Romeo</strong></span><br></p>
        	<!-- <a id="chr" class="btn btn-link" title="This will open PDF window sticker" style="cursor:pointer;border-style:none;background:#ffffff;" onclick="chrysler()"><span class="glyphicon glyphicon-edit"></span> Window sticker </a> <br> -->
		<p style="line-height:1.5">
		<button class="linkbutton" type="submit" id="chr" title="This will open PDF window sticker" onclick="chrysler()"> Window Sticker</button> Available for newer vehicles <br>
		<button class="linkbutton" type="submit" id="chrbutton" title="This will open PDF window sticker" onclick="chryslerlist()"> Build Sheet</button> Available for most vehicles <br>
		</p>	
		</div>
		
		</div>
		
		<div class="column right">
		<!-- <iframe src="http://www.blackbookportals.com/bb/products/vinpricingxpresshtmlportal.asp?color=o&companyid=thinkbank.COM" height="600" width="400" style="border:4px solid orange;">
  		    </iframe> --> 
			
		<p>
		<span style="font-size: 16px; background-color:#fdde58; color: #036; font-family: Montserrat,'Trebuchet MS',Helvetica,sans-serif;"><strong>Blackbook and Research</strong></span><br>
		<a href="http://www.blackbookportals.com/bb/products/vinpricingxpresshtmlportal.asp?color=o&companyid=thinkbank.COM" target="_blank" class="btn btn-link" title="BlackBook Online" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> BlackBook First Values</a><br>
		<a href="http://www.blackbookusa.com/bb/products/usedcarhtmlportal.asp?color=d&companyid=cudirect.com" target="_blank" class="btn btn-link" title="BlackBook Online" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> BlackBook Used Car</a><br>
		<a href="http://www.blackbookportals.com/bb/products/newcarhtmlportal.asp?color=o&companyid=thinkbank.COM" target="_blank" class="btn btn-link" title="BlackBook Online" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> BlackBook New Car Info </a><br>
		<a href="http://www.blackbookportals.com/bb/products/cycleshtmlportal.asp?color=o&companyid=thinkbank.COM" target="_blank" class="btn btn-link" title="BlackBook Online" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> BlackBook Recreational</a><br>
		<a href="http://www.auto-brochures.com" target="_blank" class="btn btn-link" title="Factory Brochures" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> Auto Brochures</a><br>
		<a href="http://www.motortrend.com/cars/" target="_blank" class="btn btn-link" title="Great resource for BMW or MINI packages" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> Motor Trend for Packages</a><br>
		<a href="http://autoweek.com/buyers-guide" target="_blank" class="btn btn-link" title="Great resource for BMW or MINI packages" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> AutoWeek for Packages</a><br>
		<a href="https://care.siriusxm.com/vinlookup_view.action" target="_blank" class="btn btn-link" title="Sirius XM VIN check" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span> Satellite Radio VIN Check</a><br>
		<a href="https://propelfuels.com/vehicles" target="_blank" class="btn btn-link" title="Search by make/model to see 8th digit VIN" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span>Flex Fuel VIN Code Check</a><br>
		<a href="http://www.ethanolretailer.com/images/uploads/FFV-2017.pdf" target="_blank" class="btn btn-link" title="2014 PDF List" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span>Flex Fuel 2017 PDF List</a><br>
		<a href="https://www.goodyear.com/en-US/tire-guide/find-tire-size" target="_blank" class="btn btn-link" title="VIN/License Plate Search" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span>Tire Sizes VIN/License Plate</a><br>
		<a href="https://www.vehiclehistory.com/license-plate-search.php" target="_blank" class="btn btn-link" title="VIN/License Plate Search" style="cursor:pointer;border-style:none;background:#ffffff;"><span class="glyphicon glyphicon-share"></span>License Plate Search for VIN</a><br>
		</p>	
		</div>
	</div>
<!--    -----------------------------------------------------              -->	
	<div class="row" align="center" style="background-color:#fff;">			
		<div id="nhtsa_data" style="display:none; background-color:#fff;">
        		<textarea id="txt_results" rows="6" cols="60" placeholder="Vehicle Data Presented Here"></textarea>
		</div>
	</div>
													       
	<div class="row" align="left"	style="background-color:#fff;">
		<div class="column left">
				    
		</div>
		<div class="column middle">
				     
		</div>
		<div class="column right" >
				     
		</div>

	</div>
	

				     
		



<script>
	var vin;
	var aYear;
	var aMake;
	var aModel;
	
document.getElementById("btn_submit").onclick = function () {
  //var vin;
  vin = document.getElementById("b12").value;
	vin = vin.replace(/ +/g, "");					      
	if (vin[0] == '{') {
	vin = vin.slice(1,-1);
	}
	vin = vin.toUpperCase();
	document.getElementById("b12").value = vin;
  if (vin.length === 17) {
	  getNHTSADataByVIN(vin);
  } else {
       alert("VIN number should be 17 digits long, currently " + vin.length + " digits entered.");
}

};


function getNHTSADataByVIN (param_vin) {
  $.ajax({
    url: "https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVINValuesBatch/",
    //url: "https://obw.carmax.com/api/v1/blackbook/BlackBookVinValues/",
    type: "POST",
    data: { format: "json", data: param_vin },
    dataType: "json",
    success: function(result)
    {
      console.log(result);
 

  //alert("Make: " + result.Results[0].Make);

	if ( result.Results[0].ModelYear !== "")  { 
		aYear = result.Results[0].ModelYear
	} else {
		aYear = ""
	};
	if ( result.Results[0].Make !== "")  { 
		aMake = result.Results[0].Make 
	} else {
		aMake = ""
	};
	if ( result.Results[0].Model !== "")  { 
		aModel = result.Results[0].Model 
	} else {
		aModel = ""
	};
	if ( result.Results[0].Series !== "")  { 
		aSeries = result.Results[0].Series
	} else {
		aSeries = ""
	};
	if ( result.Results[0].Trim !== "")  { 
		aTrim = result.Results[0].Trim
	} else {
		aTrim = ""
	};
	if ( result.Results[0].DisplacementL !== "")  { 
		aDisp = result.Results[0].DisplacementL + "L"
	} else {
		aDisp = ""
	};
	if ( result.Results[0].EngineCylinders !== "")  { 
		aCyl = result.Results[0].EngineCylinders + "cyl"
	} else {
		aCyl = ""
	};
	if ( result.Results[0].DriveType !== "")  { 
		aDrive = result.Results[0].DriveType
	} else {
		aDrive= ""
	};
	if ( result.Results[0].Doors !== "")  { 
		aDoor = result.Results[0].Doors + "D"
	} else {
		aDoor= ""
	};
	if ( result.Results[0].BodyCabType !== "")  { 
		aCab = result.Results[0].BodyCabType
	} else {
		aCab = ""
	};
	if ( result.Results[0].BodyClass !== "")  { 
		aBody = result.Results[0].BodyClass
	} else {
		aBody= ""
	};

 	
	document.getElementById("output").innerText = aYear + " " + aMake + " " + aModel + " " + aSeries + " " aTrim + ", "+ aDisp + " " + aCyl + ", " + aDrive  + " \n " + aDoor + aCab + " " + aBody + " \r\n ";;
	//document.getElementById("output").value += aDoor + aCab + aBody + " \r\n ";
	
	//autobrochures(aMake);    
      displayNHTSAResults(result);
    },
    error: function(xhr, ajaxOptions, thrownError)
    {
        console.log(xhr.status);
        console.log(thrownError);
    }
  });
};

function autobrochures (param_make) {
	param_make = param_make.toLowerCase()
  $.ajax({
    url: "https://www.auto-brochures.com/"+ param_make + ".html" ,
    //url: "https://obw.carmax.com/api/v1/blackbook/BlackBookVinValues/",
    type: "POST",
    data: { format: "text", data: param_make },
    dataType: "json",
    success: function(result)
    {
      console.log(result);
 
	
      checkLinks(result, "TL");
    },
    error: function(xhr, ajaxOptions, thrownError)
    {
        console.log(xhr.status);
        console.log(thrownError);
    }
  });
};
	
function displayNHTSAResults (param_data) {
	var output_text = "";
	for (var i = 0; i < param_data.Results.length; i++) {
		var result = param_data.Results[i];
		for (var prop in result) {
			if (result.hasOwnProperty(prop) && result[prop] !== "") {
				output_text += prop + ": " + result[prop] + "\n";
			}
		}
	}
	document.getElementById("txt_results").value = output_text;
	
	//var e = document.getElementById("nhtsa_data");
    //e.style.display = (e.style.display == 'block') ? 'none' : 'block';
	
	//document.getElementById("nhtsa_data").style.display = (document.getElementById("nhtsa_data").style.display == 'block') ? 'none' : 'block';
	
	document.getElementById("nhtsa_data").style.display = 'block';
	updatedisplay ();
	

};
	
function updatedisplay ( ) {
	console.log(aMake);
	if (aMake == "CHRYSLER") {
	document.getElementById("chrysler_div").style.display = 'block';
	} else {
		document.getElementById("chrysler_div").style.display = 'none';
	}
};

function chrysler() {
	window.open("https://www.chrysler.com/hostd/windowsticker/getWindowStickerPdf.do?vin="+vin);
};
function chryslerlist() {
	window.open(" http://www.chrysler.com/webselfservice/BuildSheetServlet?vin="+vin);
};
	
function checkLinks( code, searchString )
{

    var url;

    // We need to create an HTML document element so we can use javascript dom functions on it.
    var doc = document.createElement("html");
    doc.innerHTML = code; // put the code into the document

    // Get all  links in the code
    var links = doc.getElementsByTagName("a")

    // Loop over all links
    for (var i=0; i<links.length; i++) {
        // Check if the search string (e.g "google.com") is found in the href of the link
        if(  links[i].getAttribute("href").indexOf(searchString) != -1 ) {
            // Set it to the return value
            url = links[i].getAttribute("href");
            // stop looping
            break;
        }
    }
	alert (url);
    return url;
}

var input13 = document.getElementById("b12");
input13.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
   event.preventDefault();
   document.getElementById("btn_submit").click();
  }
});
	
</script>
	
</body>
</html>
